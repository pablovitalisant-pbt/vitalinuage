# Especificación de Integración UI - Slice 08.2

## 1. Objetivo
Conectar los componentes de frontend `DoctorContext` y `Search` con los endpoints reales implementados en el backend (`/api/doctor/profile` y `/api/pacientes/search`), reemplazando los datos mockeados actuales.

## 2. Integración de Identidad (DoctorContext)

### Contrato de Datos
El frontend utilizará la interfaz `DoctorProfile` definida en `contracts/dashboard.ts`:
```typescript
interface DoctorProfile {
    professional_name: string;
    specialty: string;
    registration_number: string;
}
```

### Comportamiento Esperado
1.  **Carga Inicial**: Al montar el `App` o `Dashboard`, el `DoctorContext` debe invocar `GET /api/doctor/profile`.
2.  **Estado**:
    *   `profile`: Almacena los datos recibidos.
    *   `loading`: Indica si la petición está en curso.
    *   `error`: Captura fallos de red.
3.  **Degradación Graciosa**:
    *   Si la API responde con error (4xx/5xx) o falla la red, el valor de `professional_name` debe ser **"Dr. Vitali"** (valor por defecto).
    *   Esto asegura que el saludo "Hola, Dr. Vitali" nunca se rompa.

## 3. Integración de Búsqueda (Search.tsx)

### Contrato de Datos
El frontend utilizará `PatientSearchResult` y `PatientSearchResponse`:
```typescript
interface PatientSearchResult {
    id: number;
    nombre_completo: string;
    dni: string;
    imc: number;
}
```

### Comportamiento Esperado
1.  **Input de Búsqueda**:
    *   Evento `onChange` captura la entrada del usuario.
2.  **Reglas de Disparo**:
    *   **Longitud Mínima**: La petición a la API SOLO se debe realizar si el término de búsqueda tiene **3 o más caracteres**.
    *   **Debounce**: (Opcional pero recomendado) Evitar saturar la red mientras el usuario escribe.
3.  **Estados de UI**:
    *   **Inactivo** (`query.length < 3`): Mostrar estado vacío o instrucciones.
    *   **Buscando** (`isLoading`): Mostrar indicador de carga (spinner o texto "Buscando...").
    *   **Resultados**: Mostrar lista de pacientes encontrados.
    *   **Sin Resultados**: Mostrar mensaje "No se encontraron pacientes" y opción de crear nuevo.
    *   **Error**: Mostrar mensaje discreto "Error en la búsqueda", permitir reintentar.

## 4. Plan de Implementación
1.  Modificar `src/context/DoctorContext.tsx` para implementar `fetchProfile` real.
2.  Modificar `src/components/Search.tsx` para usar `api.get('/pacientes/search')` con la lógica de longitud mínima.
