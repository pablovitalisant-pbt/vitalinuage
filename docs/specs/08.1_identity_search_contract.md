# Slice 08.1: Identity & Search Contract (Fase A)

Este documento define el contrato de datos para las funcionalidades de Identidad del Doctor y Búsqueda de Pacientes.

## 1. Identidad del Doctor

### Endpoint
`GET /api/doctor/profile`

### Descripción
Retorna el perfil profesional del doctor autenticado para personalizar la UI (Saludo, Título).

### Schema: DoctorProfile
Ubicación: `backend/schemas/doctor.py`

```python
from pydantic import BaseModel

class DoctorProfile(BaseModel):
    professional_name: str  # Ej: "Dr. Pablo Vitali"
    specialty: str          # Ej: "Cardiología"
    registration_number: str # Ej: "MN 12345"
```

### Comportamiento
- Si el perfil no existe en DB, debe retornar valores por defecto o 404 (a definir en implementación).
- Requiere autenticación Bearer.

---

## 2. Búsqueda de Pacientes

### Endpoint
`GET /api/pacientes/search`

### Query Params
- `q`: string (requerido). Término de búsqueda (min 2 chars).

### Descripción
Busca pacientes que coincidan con el término `q` en Nombre, Apellido Paterno, Apellido Materno o DNI.
El ámbito de búsqueda está restringido a los pacientes del `owner_id` (token).

### Schema: PatientSearchResponse
Ubicación: `backend/schemas/patients.py` (o `patients_schema.py`)

```python
from pydantic import BaseModel

class PatientSearchResult(BaseModel):
    id: int
    nombre_completo: str # Calculado: "{nombre} {apellido_paterno} {apellido_materno}"
    dni: str
    imc: float

class PatientSearchResponse(BaseModel):
    results: list[PatientSearchResult]
```

### Comportamiento
- Búsqueda "OR" en campos relevantes.
- `nombre_completo` debe ser concatenado en Backend para simplificar Frontend.
- Retorna lista vacía `[]` si no hay coincidencias (Status 200).

---

## 3. Frontend Contract

Ubicación: `frontend/src/contracts/dashboard.ts`

```typescript
export interface DoctorProfile {
    professional_name: string;
    specialty: string;
    registration_number: string;
}

export interface PatientSearchResult {
    id: number;
    nombre_completo: string;
    dni: string;
    imc: number;
}

export interface PatientSearchResponse {
    results: PatientSearchResult[];
}
```
